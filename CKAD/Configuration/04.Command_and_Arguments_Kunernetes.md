# ‚ò∏Ô∏è Lecture: Commands and Arguments in a Kubernetes Pod

---

## üéØ Lecture Objective

In this lecture, we will learn how to use **commands** and **arguments** in a Kubernetes Pod definition.
We will see how these fields correspond to the **ENTRYPOINT** and **CMD** instructions in a Dockerfile.

---

## üß† 1. Background

In the previous lecture, we created a simple Docker image named **ubuntu-sleeper**.
This image was built from an Ubuntu base image and was designed to **sleep for a given number of seconds**.

By default:

```bash
docker run ubuntu-sleeper
```

‚Ä¶causes the container to sleep for **5 seconds**.

You can override this behavior by passing a command-line argument:

```bash
docker run ubuntu-sleeper 10
```

Now, the container sleeps for **10 seconds** before exiting.

---

## üß± 2. Creating a Kubernetes Pod Using This Image

We will now create a **Kubernetes Pod** using the same `ubuntu-sleeper` image.

Start with a basic Pod definition template:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-sleeper-pod
spec:
  containers:
  - name: ubuntu-sleeper
    image: ubuntu-sleeper
```

When this Pod is created, it will:

* Start a container from the `ubuntu-sleeper` image
* Execute the default command (`sleep 5`)
* Exit after 5 seconds

---

## ‚è≥ 3. Overriding the Default Argument (CMD)

Now, suppose you want the container to sleep for **10 seconds** instead of 5.
In Docker, you would write:

```bash
docker run ubuntu-sleeper 10
```

In Kubernetes, you achieve the same by adding an **args** property to the container specification.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-sleeper-pod
spec:
  containers:
  - name: ubuntu-sleeper
    image: ubuntu-sleeper
    args: ["10"]
```

‚úÖ The `args` field corresponds to the **CMD instruction** in the Dockerfile.
It allows you to override the default arguments provided by CMD.

---

## ‚öôÔ∏è 4. Understanding Dockerfile Relationship

Let‚Äôs recall the Dockerfile we used to build the `ubuntu-sleeper` image:

```dockerfile
FROM ubuntu
ENTRYPOINT ["sleep"]
CMD ["5"]
```

* **ENTRYPOINT** specifies the command to execute (`sleep`).
* **CMD** provides the default argument (`5`).

In Kubernetes:

* The **command** field in the Pod definition corresponds to **ENTRYPOINT**.
* The **args** field corresponds to **CMD**.

---

## üîÅ 5. Overriding the ENTRYPOINT

Now, imagine you want to override the **ENTRYPOINT** itself ‚Äî for example, replacing `sleep` with `sleep2.0`.

In Docker, you would run:

```bash
docker run --entrypoint sleep2.0 ubuntu-sleeper 10
```

In Kubernetes, this is done using the **command** field:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-sleeper-pod
spec:
  containers:
  - name: ubuntu-sleeper
    image: ubuntu-sleeper
    command: ["sleep2.0"]
    args: ["10"]
```

‚úÖ The `command` field **overrides ENTRYPOINT**.
‚úÖ The `args` field **overrides CMD**.

---

## üß© 6. Important Summary

| Docker Concept                | Kubernetes Field | Description                        |
| ----------------------------- | ---------------- | ---------------------------------- |
| **ENTRYPOINT**                | `command`        | The main executable to run         |
| **CMD**                       | `args`           | Default parameters for the command |
| **docker run --entrypoint**   | `command` field  | Override the ENTRYPOINT            |
| **docker run <image> <args>** | `args` field     | Override the CMD                   |

üî∏ **Remember:**
It is **not** the `command` field that overrides CMD ‚Äî `args` does that.
The `command` field always maps to ENTRYPOINT.

---

## üíª 7. Practice Exercises

1. Create a Pod using the `ubuntu-sleeper` image that sleeps for **10 seconds**.
2. Modify the Pod to use a custom command (`sleep2.0`) and pass `20` as an argument.
3. Check the Pod‚Äôs logs after it completes:

   ```bash
   kubectl logs ubuntu-sleeper-pod
   ```
4. Delete the Pod and recreate it with different arguments to observe changes.

---

## üß† 8. Interview & Quiz Questions

| Question                                                        | Answer                                                                 |
| --------------------------------------------------------------- | ---------------------------------------------------------------------- |
| What does the `command` field in a Pod correspond to in Docker? | ENTRYPOINT                                                             |
| What does the `args` field in a Pod correspond to in Docker?    | CMD                                                                    |
| Which field overrides ENTRYPOINT in Kubernetes?                 | `command`                                                              |
| Which field overrides CMD in Kubernetes?                        | `args`                                                                 |
| What happens if both `command` and `args` are omitted?          | The defaults from the Dockerfile are used.                             |
| Can you use both `command` and `args` together?                 | Yes, `command` replaces ENTRYPOINT and `args` supplies its parameters. |

---
