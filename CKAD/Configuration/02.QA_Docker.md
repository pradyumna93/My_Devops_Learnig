## ðŸ³ **Docker Lab: Working with Images and Containers**

### ðŸŽ¯ **Objective**

In this lab, you will:

1. Check available Docker images on your host.
2. Create and build a custom Docker image.
3. Run a container from that image and expose ports.
4. Inspect the base image of another image.
5. Review Q&A and best-practice suggestions.

---

## ðŸ§© **Task 1: Check How Many Images Are Available on This Host**

### ðŸ”¹ Command:

```bash
docker images
```

### ðŸ”¹ Output Example:

```
REPOSITORY       TAG       IMAGE ID       CREATED          SIZE
ubuntu           latest    2dc39ba059dc   2 weeks ago      77.8MB
nginx            latest    4bb46517cac3   3 weeks ago      133MB
redis            alpine    185d3c5e96d8   4 weeks ago      31.4MB
webapp-color     v1        6b52c4e8f9a9   2 hours ago      220MB
```

### ðŸ”¹ Question:

**Q:** How many images are available on this host?
**A:** There are **4 images** available (ubuntu, nginx, redis, webapp-color).

---

## ðŸ§© **Task 2: Create a Dockerfile and Build the Image**

Letâ€™s create a simple Dockerfile for a **custom web application** (for example, a static color web app).

### ðŸ”¹ Dockerfile (`Dockerfile`)

```dockerfile
# Base image
FROM nginx:alpine

# Copy static website files into nginx container
COPY . /usr/share/nginx/html

# Expose port 8080 inside the container
EXPOSE 8080

# Start nginx
CMD ["nginx", "-g", "daemon off;"]
```

> ðŸ“ **Note:**
>
> * Weâ€™re using `nginx:alpine` as a lightweight base image.
> * All files in your current directory (`.`) will be copied into the Nginx web root.

### ðŸ”¹ Build the Image:

```bash
docker build -t webapp-color:v1 .
```

### ðŸ”¹ Verify:

```bash
docker images | grep webapp-color
```

Output:

```
webapp-color   v1    6b52c4e8f9a9   1 minute ago   22.3MB
```

---

## ðŸ§© **Task 3: Run a Container and Map Ports**

### ðŸ”¹ Run the Container:

```bash
docker run -d -p 8282:8080 --name webapp-color webapp-color:v1
```

### ðŸ”¹ Explanation:

* `-d` â†’ Run in detached mode (background).
* `-p 8282:8080` â†’ Map **container port 8080** to **host port 8282**.
* `--name webapp-color` â†’ Name of the container.
* `webapp-color:v1` â†’ The image to use.

### ðŸ”¹ Verify Running Containers:

```bash
docker ps
```

Output:

```
CONTAINER ID   IMAGE              COMMAND                  PORTS                  NAMES
3ab5e60b7b2e   webapp-color:v1    "nginx -g 'daemon ofâ€¦"   0.0.0.0:8282->8080/tcp   webapp-color
```

### ðŸ”¹ Test the App:

Open your browser and visit:

```
http://localhost:8282
```

You should see your **web app** running successfully.

---

## ðŸ§© **Task 4: Find the Base Image of Another Image (xyz)**

### ðŸ”¹ Command:

```bash
docker inspect xyz --format='{{.Config.Image}}'
```

Or view the full metadata:

```bash
docker history xyz
```

### ðŸ”¹ Example Output:

```
IMAGE          CREATED BY
b45d3e5c12ab   FROM ubuntu:20.04
```

### ðŸ”¹ Question:

**Q:** What is the base image used by image `xyz`?
**A:** The base image is **ubuntu:20.04**.

---

## ðŸ’¬ **Common Interview/Exam Questions & Answers**

| #  | Question                                               | Answer                                                                  |        |
| -- | ------------------------------------------------------ | ----------------------------------------------------------------------- | ------ |
| 1  | How do you list all Docker images on the host?         | Use `docker images`                                                     |        |
| 2  | How do you check the total count of Docker images?     | `docker images -q                                                       | wc -l` |
| 3  | How do you see the base image used to build an image?  | `docker history <image>` or inspect the Dockerfile                      |        |
| 4  | How do you remove all unused Docker images?            | `docker image prune -a`                                                 |        |
| 5  | What does the `-p` flag do in `docker run`?            | Maps a host port to a container port                                    |        |
| 6  | What is the difference between `CMD` and `ENTRYPOINT`? | `CMD` provides default arguments; `ENTRYPOINT` defines the main command |        |
| 7  | How can you tag and push an image to Docker Hub?       | `docker tag image user/repo:tag` then `docker push user/repo:tag`       |        |
| 8  | How to see logs from a running container?              | `docker logs <container_name>`                                          |        |
| 9  | How to enter a running container?                      | `docker exec -it <container_name> /bin/sh`                              |        |
| 10 | How to stop and remove a container?                    | `docker stop <container_name> && docker rm <container_name>`            |        |

---

