# ğŸ³ Docker Lecture: Commands, Arguments & Entry Points

---

## ğŸ¯ Lecture Objective

In this lecture, we will explore how **Docker containers execute commands** and understand the difference between:

* **CMD**
* **ENTRYPOINT**
* **Arguments (Args)**

You will learn how containers start, how default commands work, and how to override or combine them effectively.

---

## ğŸ§  1. Understanding Container Behavior

Letâ€™s begin with a simple scenario:
When you run:

```bash
docker run ubuntu
```

Youâ€™ll notice the container starts and **exits immediately**.
If you list running containers:

```bash
docker ps
```

You wonâ€™t see it running. But if you check all containers (including stopped ones):

```bash
docker ps -a
```

Youâ€™ll find that the container is in an **Exited** state.

---

### â“ Why does it exit immediately?

Unlike virtual machines, **containers are not designed to host full operating systems**.
They are designed to run **a single process or task**, such as:

* A web server (e.g., `nginx`)
* A database (e.g., `mysql`)
* A computation or script (e.g., `python app.py`)

When that process ends, the container also stops.
The **container only lives as long as the main process inside it is running**.

If that process (e.g., a web server) crashes or stops, the container exits too.

---

## âš™ï¸ 2. The Role of CMD

Every Docker image defines a **default command** using the `CMD` instruction in its Dockerfile.

For example:

* **Nginx image** â†’ `CMD ["nginx", "-g", "daemon off;"]`
* **MySQL image** â†’ `CMD ["mysqld"]`
* **Ubuntu image** â†’ `CMD ["bash"]`

The **CMD** instruction defines the command that runs **when the container starts**.

---

### ğŸ§© Example

When you run:

```bash
docker run ubuntu
```

It executes the default command defined in the imageâ€™s Dockerfile â€” in this case, `bash`.
However, `bash` is a shell that expects a terminal. Since Docker doesnâ€™t attach a terminal by default, `bash` exits immediately â€” and so does the container.

To keep it running, you can attach a terminal:

```bash
docker run -it ubuntu
```

---

## ğŸ§ª 3. Overriding CMD with a Custom Command

You can override the default command defined in the image using an argument after `docker run`:

```bash
docker run ubuntu sleep 5
```

This command starts a container, runs the `sleep 5` command, waits for 5 seconds, and then exits.

---

## ğŸ§± 4. Making Your Own Image with CMD

To make this behavior permanent, create a Dockerfile:

```dockerfile
FROM ubuntu
CMD ["sleep", "5"]
```

Build your image:

```bash
docker build -t ubuntu-sleeper .
```

Run the image:

```bash
docker run ubuntu-sleeper
```

This runs `sleep 5` every time by default.

---

## ğŸ” 5. Overriding CMD Arguments

You can still override the CMD value during runtime:

```bash
docker run ubuntu-sleeper sleep 10
```

Or more cleanly:

```bash
docker run ubuntu-sleeper 10
```

But for the second form to work, you must use **ENTRYPOINT**.

---

## ğŸšª 6. ENTRYPOINT Explained

The **ENTRYPOINT** instruction defines the **main executable** for the container.
The **CMD** instruction provides **default arguments** to that executable.

### Example:

```dockerfile
FROM ubuntu
ENTRYPOINT ["sleep"]
CMD ["5"]
```

Now:

* Running `docker run ubuntu-sleeper` â†’ executes `sleep 5`
* Running `docker run ubuntu-sleeper 10` â†’ executes `sleep 10`

Thus:

* **ENTRYPOINT** defines *what* to run.
* **CMD** defines *default parameters* for it.

---

## âš¡ 7. CMD vs ENTRYPOINT Comparison

| Feature            | CMD                  | ENTRYPOINT               |
| ------------------ | -------------------- | ------------------------ |
| Purpose            | Default command      | Main executable          |
| Can be overridden? | Yes (fully)          | Only with `--entrypoint` |
| Common use case    | Provide defaults     | Define mandatory command |
| Example            | `CMD ["sleep", "5"]` | `ENTRYPOINT ["sleep"]`   |

---

## ğŸ§© 8. Overriding ENTRYPOINT

If you ever want to override the entrypoint:

```bash
docker run --entrypoint sleep2.0 ubuntu-sleeper 10
```

This changes the executable while keeping the arguments.

---

## ğŸ§  9. Quick Recap

* **Containers run only as long as the main process is active.**
* **CMD** sets a default command.
* **ENTRYPOINT** defines the main executable.
* **CMD + ENTRYPOINT** = flexible, reusable containers.
* Use **JSON array format** (`["cmd", "arg"]`) for reliable behavior.

---

## ğŸ’» Practice Exercises

1. Run an Ubuntu container that sleeps for 5 seconds.

   ```bash
   docker run ubuntu sleep 5
   ```
2. Create a Dockerfile that always sleeps for 10 seconds by default.
3. Use ENTRYPOINT + CMD to make a flexible â€œsleepâ€ container.
4. Override the ENTRYPOINT with a custom binary using `--entrypoint`.

---

## ğŸ¯ Interview & Quiz Questions

| Question                                                | Answer                                                                 |
| ------------------------------------------------------- | ---------------------------------------------------------------------- |
| What is the difference between CMD and ENTRYPOINT?      | CMD defines a default command; ENTRYPOINT defines the main executable. |
| What happens when the process inside a container stops? | The container exits.                                                   |
| How can you keep a container running indefinitely?      | Run a long-running process (e.g., `tail -f /dev/null`).                |
| How can you override the ENTRYPOINT at runtime?         | Using `--entrypoint` option.                                           |
| What happens if both ENTRYPOINT and CMD are defined?    | CMD values are passed as arguments to ENTRYPOINT.                      |
| What is the default CMD in Ubuntu image?                | `["bash"]`                                                             |

---

## ğŸ§± Suggested Add-ons for Practice

* Try creating containers for **Node.js**, **React**, **.NET Core**, **MySQL**, and **PostgreSQL** with custom CMD and ENTRYPOINT setups.
* Observe how different base images define their startup processes by viewing Dockerfiles on Docker Hub.

---
