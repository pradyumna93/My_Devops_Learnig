## ðŸ§© **Kubernetes ConfigMap Hands-On Lab: Step-by-Step Walkthrough**

### ðŸŽ¯ **Objective**

Learn how to:

* Inspect pods and their environment variables
* Create and modify ConfigMaps
* Link ConfigMaps to pods via environment variables

---

### ðŸ§± **1. Check Existing Pods**

```bash
kubectl get pods
```

âœ… Output shows one pod:

```
webapp-color
```

ðŸ“‹ **Answer:** 1 pod exists.

---

### ðŸŒ **2. Find Environment Variable in the Pod**

```bash
kubectl describe pod webapp-color
```

Look under **Containers â†’ Environment** section.

ðŸ“‹ **Env Variable:** `APP_COLOR`
ðŸ“‹ **Value:** `pink`

---

### ðŸ–¼ **3. View the Web App**

Open the **Web App Color tab** â€” the app displays a **pink background**.

---

### ðŸ§© **4. Update the Podâ€™s Environment Variable to Green**

**Steps:**

1. Export YAML:

   ```bash
   kubectl get pod webapp-color -o yaml > pod.yaml
   ```
2. Delete the old pod:

   ```bash
   kubectl delete pod webapp-color
   ```
3. Edit `pod.yaml`:

   ```yaml
   env:
     - name: APP_COLOR
       value: green
   ```
4. Apply changes:

   ```bash
   kubectl apply -f pod.yaml
   ```
5. Refresh the web app â€” background turns **green** âœ…

---

### ðŸ§¾ **5. Check ConfigMaps in Default Namespace**

```bash
kubectl get configmap
# or
kubectl get cm
```

ðŸ“‹ **Answer:** 2 ConfigMaps exist.

---

### ðŸ’¾ **6. Inspect ConfigMap `db-config`**

```bash
kubectl describe configmap db-config
```

Under **Data**:

```
database_host = sql01.example.com
```

ðŸ“‹ **Answer:** `sql01.example.com`

---

### ðŸ›  **7. Create a New ConfigMap for WebApp**

```bash
kubectl create configmap webapp-config-map --from-literal=APP_COLOR=darkblue
```

âœ… ConfigMap created successfully.

---

### ðŸ”— **8. Update Pod to Use ConfigMap**

1. Delete the existing pod:

   ```bash
   kubectl delete pod webapp-color
   ```
2. Edit `pod.yaml` and modify env section:

   ```yaml
   env:
     - name: APP_COLOR
       valueFrom:
         configMapKeyRef:
           name: webapp-config-map
           key: APP_COLOR
   ```
3. Apply it:

   ```bash
   kubectl apply -f pod.yaml
   ```
4. Verify:

   ```bash
   kubectl get pods
   ```

   Web app now uses **ConfigMap-based color**.

---

## ðŸ’¡ **Key Concepts**

| Concept               | Command                                             | Description                         |
| --------------------- | --------------------------------------------------- | ----------------------------------- |
| List ConfigMaps       | `kubectl get cm`                                    | Shows all ConfigMaps in namespace   |
| Describe ConfigMap    | `kubectl describe cm <name>`                        | Detailed key-value pairs            |
| Create ConfigMap      | `kubectl create cm <name> --from-literal=key=value` | Quick ConfigMap creation            |
| Link ConfigMap to Pod | `valueFrom.configMapKeyRef`                         | Reference config values dynamically |
| Delete Pod            | `kubectl delete pod <name>`                         | Remove and recreate pods            |

---

## ðŸ§  **Common Interview Questions**

1. **What is a ConfigMap in Kubernetes?**
   A ConfigMap is used to store non-confidential configuration data in key-value pairs.

2. **How do you inject ConfigMap data into a Pod?**

   * As environment variables (`valueFrom.configMapKeyRef`)
   * As configuration files mounted via volumes

3. **Whatâ€™s the difference between Secret and ConfigMap?**

   * **ConfigMap:** For plain configuration values
   * **Secret:** For sensitive data (base64 encoded)

4. **How do you update a pod with a new ConfigMap value?**

   * Edit ConfigMap â†’ Recreate Pod
     (Pods donâ€™t automatically reload new ConfigMap data unless using mounted volumes with refresh support.)

5. **How can you view all environment variables of a running Pod?**

   ```bash
   kubectl exec <pod-name> -- env
   ```

---
