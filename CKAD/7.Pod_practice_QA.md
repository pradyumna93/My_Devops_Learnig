# ğŸ§© **Kubernetes Pods â€” Questions & Answers**

---

### â“1. How many pods exist on the system?

**ğŸ…°ï¸ Answer:**
Run the following command to list all pods in the current namespace:

```bash
kubectl get pods
```

* The **number of rows** (excluding the header) represents how many pods exist.
* To check across **all namespaces**, use:

  ```bash
  kubectl get pods --all-namespaces
  ```

---

### â“2. Create a new pod using the nginx image.

**ğŸ…°ï¸ Answer:**
You can create a pod using the `nginx` image with this command:

```bash
kubectl run nginx --image=nginx
```

Or, using a YAML file:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
    - name: nginx
      image: nginx
```

Then apply it:

```bash
kubectl apply -f nginx.yaml
```

---

### â“3. Which image is specified for the pods whose names begin with the **newpods-** prefix?

**ğŸ…°ï¸ Answer:**
Run the following command to describe the pods:

```bash
kubectl get pods -o wide | grep newpods-
kubectl describe pod <pod-name> | grep -i "Image"
```

This shows the **image** used by pods starting with the `newpods-` prefix.

---

### â“4. Which nodes are these pods placed on?

**ğŸ…°ï¸ Answer:**
Use:

```bash
kubectl get pods -o wide
```

The **NODE** column shows which **worker node** each pod is scheduled on.

---

### â“5. We just created a pod named **webapp**. How many containers are part of the webapp pod?

**ğŸ…°ï¸ Answer:**
Run:

```bash
kubectl describe pod webapp | grep -i "container name"
```

or

```bash
kubectl get pod webapp -o yaml
```

Count the number of containers listed under `spec.containers`.

---

### â“6. What images are used in the new **webapp** pod?

**ğŸ…°ï¸ Answer:**
Run:

```bash
kubectl describe pod webapp | grep -i "Image"
```

This will display all images used by the containers inside the `webapp` pod.

---

### â“7. What is the state of the container **agentx** in the pod **webapp**?

**ğŸ…°ï¸ Answer:**
Check the containerâ€™s status using:

```bash
kubectl get pod webapp
kubectl describe pod webapp | grep -A5 "agentx"
```

The **State** field (e.g., `Running`, `CrashLoopBackOff`, `Error`, etc.) will indicate its current state.

---

### â“8. Why do you think the container **agentx** in the pod is in error?

**ğŸ…°ï¸ Answer:**
Possible reasons:

* The image name is incorrect or unavailable.
* The container command or entrypoint failed.
* The container port or configuration is invalid.
* Insufficient resources (CPU/memory).

Check logs for details:

```bash
kubectl logs webapp -c agentx
```

---

### â“9. What does the **Ready** column in the output of the `kubectl get pods` command indicate?

**ğŸ…°ï¸ Answer:**
The **Ready** column shows the **number of containers that are ready** inside the pod.

Example:

```
NAME        READY   STATUS    RESTARTS   AGE
webapp      1/1     Running   0          5m
```

* `1/1` â†’ One container is running and ready.
* If `0/1`, it means the container is not yet ready or has failed health checks.

---

### â“10. Delete the **webapp** pod.

**ğŸ…°ï¸ Answer:**
Use:

```bash
kubectl delete pod webapp
```

âœ… This deletes the pod immediately from the cluster.

---

### â“11. Create a new pod with the name **redis** and image **redis123**.

**ğŸ…°ï¸ Answer:**
Command:

```bash
kubectl run redis --image=redis123
```

or YAML file:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: redis
spec:
  containers:
    - name: redis
      image: redis123
```

---

### â“12. Change the image on the **redis** pod from `redis123` to `redis`.

**ğŸ…°ï¸ Answer:**
You **cannot directly edit a running podâ€™s image**.
Pods are immutable once created. You must **delete and recreate** the pod.

Steps:

```bash
kubectl delete pod redis
kubectl run redis --image=redis
```

Alternatively, for Deployments or ReplicaSets, you can update the image using:

```bash
kubectl set image deployment/redis redis=redis --record
```

---

### â“13. Change the image on the **redis** pod from `redis123` to `redis`.

---

#### ğŸ…°ï¸ **Explanation:**

A Pod in Kubernetes is **immutable**, meaning you **cannot directly modify** the image of an existing Pod.
However, there are **multiple valid ways** to update or recreate the Pod with the new image.

---

## ğŸ§© **Option 1: Delete and Recreate the Pod (Simple & Recommended for Single Pods)**

```bash
kubectl delete pod redis
kubectl run redis --image=redis
```

âœ… This method is simple and ensures a clean state.
âš ï¸ Any data inside the pod will be lost (unless persistent volumes are used).

---

## ğŸ§© **Option 2: Edit the Pod Definition File and Reapply**

If you originally created the pod using a YAML file (e.g., `redis-pod.yaml`), follow these steps:

1. Edit the YAML:

   ```yaml
   spec:
     containers:
       - name: redis
         image: redis
   ```
2. Apply the updated file:

   ```bash
   kubectl apply -f redis-pod.yaml --force
   ```

âœ… This updates the pod definition.
âš ï¸ `--force` deletes and recreates the pod behind the scenes.

---

## ğŸ§© **Option 3: Use the kubectl edit Command**

You can directly open and modify the live pod configuration:

```bash
kubectl edit pod redis
```

In the editor that opens:

* Find the line under `spec.containers.image:`
* Change it from:

  ```
  image: redis123
  ```

  to:

  ```
  image: redis
  ```
* Save and exit (`:wq` in vi)

âœ… Kubernetes will terminate and recreate the pod automatically.

âš ï¸ **Note:** Some clusters disallow direct pod edits (immutable fields). If you see:

```
error: pods "redis" is invalid
```

then deletion and recreation is required.

---

## ğŸ§© **Option 4: For Deployments, Use kubectl set image (Best Practice for Managed Pods)**

If your redis pod is managed by a **Deployment** or **ReplicaSet**, use:

```bash
kubectl set image deployment/redis redis=redis --record
```

Then verify:

```bash
kubectl rollout status deployment/redis
```

âœ… Safest method for production environments.
âœ… Supports zero-downtime updates with rollback options.
âš ï¸ Not applicable if the Pod was created directly (not via Deployment).

---

## ğŸ§© **Option 5: Patch the Pod (Advanced Method)**

You can also patch the running pod definition with a JSON command:

```bash
kubectl patch pod redis -p '{"spec":{"containers":[{"name":"redis","image":"redis"}]}}'
```

âœ… Works without opening an editor.
âš ï¸ May fail if the field is immutable â€” in that case, deletion is still required.

---

### ğŸ§  **Summary:**

| Method            | Command                                                        | Works For         | Notes                  |
| ----------------- | -------------------------------------------------------------- | ----------------- | ---------------------- |
| Delete & Recreate | `kubectl delete pod redis` â†’ `kubectl run redis --image=redis` | Any pod           | Safest for simple pods |
| Edit YAML File    | `kubectl apply -f redis.yaml --force`                          | YAML-defined pods | Requires file          |
| Edit Live Pod     | `kubectl edit pod redis`                                       | Any pod           | Quick manual edit      |
| Update Deployment | `kubectl set image deployment/redis redis=redis`               | Deployments       | Best for production    |
| Patch Pod         | `kubectl patch pod redis -p ...`                               | Any pod           | Advanced / JSON based  |

---
