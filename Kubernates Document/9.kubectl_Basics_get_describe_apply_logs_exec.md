# ‚ö° Topic 5 ‚Äî kubectl Basics (get, describe, apply, logs, exec)

---

## üåç 1Ô∏è‚É£ What is kubectl?

`kubectl` is the **command-line interface (CLI) tool for Kubernetes**.

It allows you to:

* Deploy applications
* Inspect cluster resources
* Debug issues
* Control the cluster

Think of `kubectl` as your **remote control for Kubernetes** ‚Äî everything you do in a cluster usually goes through it.

---

### üîπ kubectl Architecture

```
User -> kubectl -> Kubeconfig -> API Server -> Cluster Objects
```

1. **kubectl** reads **kubeconfig** to know which cluster, namespace, and user to use.
2. Sends HTTP REST requests to the **API server**.
3. API server validates, processes, and stores/retrieves data in **etcd**.
4. kubectl outputs results to your terminal.

---

## üß© 2Ô∏è‚É£ Common kubectl Commands

Let‚Äôs break down the **most essential commands** you‚Äôll use daily.

---

### 2.1 `kubectl get` ‚Äî Viewing Resources

**Purpose:** List resources in the cluster (Pods, Nodes, Deployments, Services, Namespaces, etc.)

**Basic Syntax:**

```bash
kubectl get <resource> [name] [flags]
```

**Examples:**

```bash
kubectl get pods             # List all Pods in current namespace
kubectl get pods -n dev      # List Pods in 'dev' namespace
kubectl get nodes            # List all Nodes
kubectl get deployments      # List all Deployments
kubectl get all              # List all resources in current namespace
kubectl get all --all-namespaces
```

**Flags:**

* `-o wide` ‚Üí Show extra info (Node, IP, etc.)
* `-o yaml` ‚Üí Output in YAML format
* `-o json` ‚Üí Output in JSON format

---

### 2.2 `kubectl describe` ‚Äî Detailed Information

**Purpose:** Get detailed information about a resource, including events, status, labels, annotations, and pod conditions.

**Syntax:**

```bash
kubectl describe <resource> <name> [-n namespace]
```

**Examples:**

```bash
kubectl describe pod nginx-pod
kubectl describe node node1
kubectl describe deployment nginx-deploy -n dev
```

**Use Cases:**

* Debug why a Pod is not running
* See events like `FailedScheduling` or `CrashLoopBackOff`
* Inspect labels, selectors, and annotations
* Check resource usage and node assignment

---

### 2.3 `kubectl apply` ‚Äî Declarative Resource Management

**Purpose:** Apply a configuration file to create or update resources declaratively.

**Syntax:**

```bash
kubectl apply -f <file.yaml>
```

**Examples:**

```bash
kubectl apply -f pod.yaml
kubectl apply -f deployment.yaml
kubectl apply -f namespace.yaml
```

**Key Points:**

* Declarative approach: You define the desired state in YAML.
* Kubernetes reconciles current state to match desired state.
* Supports **create and update** (idempotent).

**Workflow:**

1. You write YAML ‚Üí desired state
2. `kubectl apply` sends it to API server
3. API server stores in etcd
4. Controllers bring cluster state in line

---

### 2.4 `kubectl logs` ‚Äî Inspect Container Logs

**Purpose:** View logs of running or crashed containers in Pods.

**Syntax:**

```bash
kubectl logs <pod-name> [-c container-name] [-n namespace] [flags]
```

**Examples:**

```bash
kubectl logs nginx-pod                # Logs of single container Pod
kubectl logs multi-pod -c nginx      # Logs for specific container
kubectl logs -f nginx-pod            # Follow logs in real time
```

**Use Cases:**

* Debug application errors
* Monitor running applications
* Investigate CrashLoopBackOff issues

---

### 2.5 `kubectl exec` ‚Äî Execute Commands in a Pod

**Purpose:** Run a command directly inside a running container.

**Syntax:**

```bash
kubectl exec -it <pod-name> -- <command>
```

**Examples:**

```bash
kubectl exec -it nginx-pod -- bash          # Open bash shell inside pod
kubectl exec -it nginx-pod -- cat /etc/hosts  # View hosts file inside pod
```

**Flags:**

* `-i` ‚Üí Interactive
* `-t` ‚Üí Allocate a pseudo-TTY

**Use Cases:**

* Debug container internals
* Check connectivity
* Inspect files or logs inside the container

---

## üß∞ 3Ô∏è‚É£ Other Useful kubectl Commands

| Command                                        | Purpose                                                  |
| ---------------------------------------------- | -------------------------------------------------------- |
| `kubectl create -f <file>`                     | Create resource from YAML (non-declarative, older style) |
| `kubectl delete <resource> <name>`             | Delete resource                                          |
| `kubectl edit <resource> <name>`               | Edit resource live in cluster                            |
| `kubectl rollout status deployment/<name>`     | Monitor deployment rollout                               |
| `kubectl scale deployment <name> --replicas=3` | Scale deployment replicas                                |
| `kubectl port-forward <pod> 8080:80`           | Forward pod port to local machine                        |
| `kubectl top pod/node`                         | Resource usage (requires metrics-server)                 |

---

## üß† 4Ô∏è‚É£ Understanding kubectl Flags

* `-n` ‚Üí Namespace
* `--all-namespaces` ‚Üí Operate across namespaces
* `-o` ‚Üí Output format (`yaml`, `json`, `wide`)
* `--selector/-l` ‚Üí Filter resources by label
* `-f` ‚Üí File for apply/create
* `-c` ‚Üí Specify container in multi-container Pod
* `-i -t` ‚Üí Interactive and TTY for exec

---

## üß© 5Ô∏è‚É£ Practical kubectl Workflow

1. **Create a resource**

```bash
kubectl apply -f pod.yaml
```

2. **Check status**

```bash
kubectl get pods
kubectl describe pod nginx-pod
```

3. **Debug if needed**

```bash
kubectl logs nginx-pod
kubectl exec -it nginx-pod -- bash
```

4. **Update or scale**

```bash
kubectl apply -f updated-pod.yaml
kubectl scale deployment nginx-deploy --replicas=5
```

5. **Delete if obsolete**

```bash
kubectl delete pod nginx-pod
```

---

## üßæ 6Ô∏è‚É£ Visualization ‚Äî How kubectl Interacts With the Cluster

```
kubectl commands
       ‚îÇ
       ‚ñº
  kubeconfig (context + namespace + user)
       ‚îÇ
       ‚ñº
  API Server (validates, authenticates, authorizes)
       ‚îÇ
       ‚ñº
  etcd (stores desired state)
       ‚îÇ
       ‚ñº
  Controllers / Scheduler / Kubelet
       ‚îÇ
       ‚ñº
  Pods / Nodes / Deployments
```

Everything you do with kubectl is **either reading state or requesting changes** to the cluster.

---

## ‚úÖ Summary of kubectl Basics

| Command            | Purpose                         |
| ------------------ | ------------------------------- |
| `kubectl get`      | List and view resources         |
| `kubectl describe` | Detailed resource info + events |
| `kubectl apply`    | Apply declarative configuration |
| `kubectl logs`     | View container logs             |
| `kubectl exec`     | Execute commands inside pods    |

**Key Principle:** kubectl = *your interface to the Kubernetes control plane*.

---

### üí° Tip for CKAD

Almost all CKAD exercises are done **via kubectl**.
So mastering these commands with namespaces, selectors, and labels is **critical for success**.

---

You‚Äôve now completed **all five core theory topics** for CKAD foundation:

1. Kubernetes Architecture
2. Pods, Nodes, Clusters
3. Namespaces and Contexts
4. Labels, Annotations, Selectors
5. kubectl Basics

---
